<!DOCTYPE html>
<html lang="en-US">
<head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GP26XDB8FY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GP26XDB8FY');
</script>

<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" as="font" href="https://gbrls.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="https://gbrls.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2"  type="font/woff2" crossorigin>


<link rel="stylesheet" href="https://gbrls.github.io/main.css">



  
  
    
  

  
  
    
    
  
  
  
    
  
  
  
  
    
  
  
  


  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">


	


	

<title>C Wizardry - Homoiconicity in C | gbrls</title>
<meta name="description" content="">
<link rel="canonical" href="https://gbrls.github.io/blog/c-gems-homoiconicity-in-c/">










<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://gbrls.github.io/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Blog",
            "item": "https://gbrls.github.io/blog/"
          },
        
      
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  3 ,
            "name": "C Gems Homoiconicity In C",
            "item": "https://gbrls.github.io/blog/c-gems-homoiconicity-in-c/"
          },
        
      
    
  }
</script>






  <meta name="theme-color" content="#fff">
  <link rel="apple-touch-icon" sizes="180x180" href="https://gbrls.github.io/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://gbrls.github.io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://gbrls.github.io/favicon-16x16.png">
  
    <link rel="manifest" href="https://gbrls.github.io/site.webmanifest" crossorigin>
  


  
    
      <!-- KaTeX -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    
  



  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://gbrls.github.io/rss.xml">


</head>

  
    
  

<body class="page single">
  
    
<header class="navbar fixed-top navbar-expand-md navbar-light">
	<div class="container">
		<input class="menu-btn order-0" type="checkbox" id="menu-btn">
		<label class="menu-icon d-md-none" for="menu-btn"><span class="navicon"></span></label>
		<a class="navbar-brand order-1 order-md-0 me-auto" href="https://gbrls.github.io">gbrls</a>
		<button id="mode" class="btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
			<span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
			<span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
		</button>
		<ul class="navbar-nav fork-me order-3 order-md-5">
			
				
					<li class="nav-item">
						<a class="nav-link" href="https://twitter.com/gabrSchn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg><span class="ms-2 visually-hidden">Twitter</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://github.com/gbrls"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://medium.com/@gabrielschneider100">M<span class="ms-2 visually-hidden">Medium</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://gbrls.github.io/rss.xml"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 512 512" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>ionicons-v5_logos</title><path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z"/><path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z"/><path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z"/></svg><span class="ms-2 visually-hidden">RSS</span></a>
					</li>
				
			
		</ul>
		<div class="collapse navbar-collapse order-4 order-md-1">
			<ul class="navbar-nav main-nav me-auto order-5 order-md-2">
				
					
				
				
				
					
						<li class="nav-item">
							<a class="nav-link" href="https://gbrls.github.io/about-me/">About me</a>
						</li>
					
						<li class="nav-item">
							<a class="nav-link" href="https://gbrls.github.io/about-here/">About Here</a>
						</li>
					
						<li class="nav-item">
							<a class="nav-link" href="https://gbrls.github.io/blog/">Blog</a>
						</li>
					
						<li class="nav-item">
							<a class="nav-link" href="https://gbrls.github.io/books/">Books</a>
						</li>
					
						<li class="nav-item">
							<a class="nav-link" href="https://gbrls.github.io/gallery/">Gallery</a>
						</li>
					
						<li class="nav-item">
							<a class="nav-link" href="https://gbrls.github.io/projects/">Projects</a>
						</li>
					
						<li class="nav-item">
							<a class="nav-link" href="https://gbrls.github.io/todo/">TODO</a>
						</li>
					
				
			</ul>
			<div class="break order-6 d-md-none"></div>
			
				<form class="navbar-form flex-grow-1 order-7 order-md-3">
					<input id="userinput" class="form-control is-search" type="search" placeholder="Search..."
						aria-label="Search..." autocomplete="off">
					<div id="suggestions" class="shadow bg-white rounded"></div>
				</form>
			
		</div>
	</div>
</header>

  

  
<div class="wrap container" role="document">
  <div class="content">
    <div class="row justify-content-center">
      <div class="col-md-12 col-lg-10 col-xxl-8">
        <article>
          <div class="page-header">
            <h1>C Wizardry - Homoiconicity in C</h1>
          </div>
          
          <h2 id="c-wizardry-intro">C Wizardry intro</h2>
<p>Sometimes I find some neat, crazy, cryptic features of the C programming
language.  As a Teaching Assistant for it, I believe I must become a C
wizard and scare the students with some esoteric magical spells. So, this is
going to be a series of posts about weird (and maybe useful) stuff in C.</p>
<h2 id="homoiconicity">Homoiconicity</h2>
<p>It's a word known by Lisp users and Programming Language nerds. It's a
really important feature of Lisp (<a href="/mk-lisp-0">I talked a bit about it</a> in my Make a Lisp
Interpreter series). The basic idea is that you can use code as data and data as code,
e.g: In languages where you have an eval function, you can read a string and then
eval it, doing this you're using data as code, one way to use code as data are
macros, they manipulate code in compile time as data, though when talking about
homoiconicity it also means to manipulate code as data in the runtime.</p>
<h2 id="homoiconicity-in-c">Homoiconicity in C</h2>
<p>This week I was studying <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation">JIT
Compilers</a> and came
across <a href="https://blog.reverberate.org/2012/12/hello-jit-world-joy-of-simple-jits.html">this
post</a>,</p>
<!---
Show here an example usage of mmap, "I encourage you to run this code and see
what it does" --->
<p>The article shows this code, that demonstrates how to execute memory in C,
(<strong>disclaimer:</strong> This only works on Unix systems).</p>
<pre data-lang="c" style="background-color:#2b303b;color:#c0c5ce;" class="language-c "><code class="language-c" data-lang="c"><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">stdio.h</span><span>&gt;
</span><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">stdlib.h</span><span>&gt;
</span><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">string.h</span><span>&gt;
</span><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">sys/mman.h</span><span>&gt;
</span><span>
</span><span style="color:#b48ead;">int </span><span style="color:#8fa1b3;">main</span><span>(</span><span style="color:#b48ead;">int </span><span style="color:#bf616a;">argc</span><span>, </span><span style="color:#b48ead;">char </span><span>*</span><span style="color:#bf616a;">argv</span><span>[]) {
</span><span>  </span><span style="color:#65737e;">// Machine code for:
</span><span>  </span><span style="color:#65737e;">//   mov eax, 0
</span><span>  </span><span style="color:#65737e;">//   ret
</span><span>  </span><span style="color:#b48ead;">unsigned char</span><span> code[] = {</span><span style="color:#d08770;">0xb8</span><span>, </span><span style="color:#d08770;">0x00</span><span>, </span><span style="color:#d08770;">0x00</span><span>, </span><span style="color:#d08770;">0x00</span><span>, </span><span style="color:#d08770;">0x00</span><span>, </span><span style="color:#d08770;">0xc3</span><span>};
</span><span>
</span><span>  </span><span style="color:#b48ead;">if </span><span>(argc &lt; </span><span style="color:#d08770;">2</span><span>) {
</span><span>    </span><span style="color:#96b5b4;">fprintf</span><span>(stderr, &quot;</span><span style="color:#a3be8c;">Usage: jit1 &lt;integer&gt;</span><span style="color:#96b5b4;">\n</span><span>&quot;);
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">1</span><span>;
</span><span>  }
</span><span>
</span><span>  </span><span style="color:#65737e;">// Overwrite immediate value &quot;0&quot; in the instruction
</span><span>  </span><span style="color:#65737e;">// with the user&#39;s value.  This will make our code:
</span><span>  </span><span style="color:#65737e;">//   mov eax, &lt;user&#39;s value&gt;
</span><span>  </span><span style="color:#65737e;">//   ret
</span><span>  </span><span style="color:#b48ead;">int</span><span> num = </span><span style="color:#96b5b4;">atoi</span><span>(argv[</span><span style="color:#d08770;">1</span><span>]);
</span><span>  </span><span style="color:#96b5b4;">memcpy</span><span>(&amp;code[</span><span style="color:#d08770;">1</span><span>], &amp;num, </span><span style="color:#d08770;">4</span><span>);
</span><span>
</span><span>  </span><span style="color:#65737e;">// Allocate writable/executable memory.
</span><span>  </span><span style="color:#65737e;">// Note: real programs should not map memory both writable
</span><span>  </span><span style="color:#65737e;">// and executable because it is a security risk.
</span><span>  </span><span style="color:#b48ead;">void </span><span>*mem = </span><span style="color:#bf616a;">mmap</span><span>(</span><span style="color:#d08770;">NULL</span><span>, sizeof(code), PROT_WRITE | PROT_EXEC,
</span><span>                   MAP_ANON | MAP_PRIVATE, -</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">0</span><span>);
</span><span>  </span><span style="color:#96b5b4;">memcpy</span><span>(mem, code, sizeof(code));
</span><span>
</span><span>  </span><span style="color:#65737e;">// The function will return the user&#39;s value.
</span><span>  </span><span style="color:#b48ead;">int </span><span>(*func)() = mem;
</span><span>  </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">func</span><span>();
</span><span>}
</span></code></pre>
<p>I encourage you to run this code to get a feeling of it, but what it means is
that <strong>you can create an array, manipulate it as a regular array and then
execute it as code</strong>!</p>
<p>Now, the other way around (manipulate code as data) it's also possible.
With the help of <a href="https://stackoverflow.com/questions/27581279/make-text-segment-writable-elf">this stack overflow thread</a>,
I was able to get it working. The first thing that I did was to try to read a function's bytes:</p>
<pre data-lang="c" style="background-color:#2b303b;color:#c0c5ce;" class="language-c "><code class="language-c" data-lang="c"><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">stdio.h</span><span>&gt;
</span><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">string.h</span><span>&gt;
</span><span>
</span><span style="color:#b48ead;">int </span><span style="color:#8fa1b3;">f0</span><span>() {
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">42</span><span>;
</span><span>}
</span><span>
</span><span style="color:#b48ead;">int </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">int</span><span> padding[</span><span style="color:#d08770;">100</span><span>];
</span><span>    </span><span style="color:#96b5b4;">memset</span><span>(padding, -</span><span style="color:#d08770;">1</span><span>, sizeof(padding));
</span><span>
</span><span>    </span><span style="color:#b48ead;">char</span><span>* p = f0;
</span><span>
</span><span>    </span><span style="color:#b48ead;">for</span><span>(</span><span style="color:#b48ead;">int</span><span> i = </span><span style="color:#d08770;">0</span><span>; i &lt; </span><span style="color:#d08770;">16</span><span>; i++) {
</span><span>        </span><span style="color:#96b5b4;">printf</span><span>(&quot;</span><span style="color:#d08770;">%x </span><span>&quot;, (</span><span style="color:#b48ead;">int</span><span>)(p[i] &amp; </span><span style="color:#d08770;">0xff</span><span>));
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#96b5b4;">putchar</span><span>(&#39;</span><span style="color:#96b5b4;">\n</span><span>&#39;);
</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">0</span><span>;
</span><span>}
</span></code></pre>
<p>And this is the output (on my my machine running 20.04 Ubuntu with <code>gcc</code>), I
highlighted the actual function code:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>                       v--------------v
</span><span>f3 f 1e fa 55 48 89 e5 b8 2a 0 0 0 5d c3 f3
</span></code></pre>
<p>Hmmmm, I was expecting <code>gcc</code> to optimize the function definition and discard the
<a href="https://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames">function's boilerplate
code</a>,
which is those bytes at the beginning and the <code>5d</code> before the <code>c3</code>, go figure.</p>
<p>So, now that we know that the <code>42</code> is in the 10th position in the binary code
(<code>2a, 16 * 2 + 10 = 42</code>) then we can change it in our code.</p>
<p><strong>Disclaimer</strong>: This code also only runs on Unix systems due to the way that we
allow the text segment to be writable.</p>
<p>You also have to compile with these flags.</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>gcc --static -g -Wl,--omagic -o test test.c
</span></code></pre>
<pre data-lang="c" style="background-color:#2b303b;color:#c0c5ce;" class="language-c "><code class="language-c" data-lang="c"><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">stdio.h</span><span>&gt;
</span><span style="color:#b48ead;">#include </span><span>&lt;</span><span style="color:#a3be8c;">string.h</span><span>&gt;
</span><span>
</span><span style="color:#b48ead;">int </span><span style="color:#8fa1b3;">f0</span><span>() {
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">42</span><span>;
</span><span>}
</span><span>
</span><span style="color:#b48ead;">int </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">int</span><span> padding[</span><span style="color:#d08770;">100</span><span>];
</span><span>    </span><span style="color:#96b5b4;">memset</span><span>(padding, -</span><span style="color:#d08770;">1</span><span>, sizeof(padding));
</span><span>
</span><span>    </span><span style="color:#b48ead;">int</span><span> a = </span><span style="color:#bf616a;">f0</span><span>();
</span><span>
</span><span>    </span><span style="color:#b48ead;">char</span><span>* p = f0;
</span><span>    </span><span style="color:#65737e;">// changing the return value of the function
</span><span>    p[</span><span style="color:#d08770;">9</span><span>] = </span><span style="color:#d08770;">16</span><span>;
</span><span>    </span><span style="color:#b48ead;">for</span><span>(</span><span style="color:#b48ead;">int</span><span> i = </span><span style="color:#d08770;">0</span><span>; i &lt; </span><span style="color:#d08770;">16</span><span>; i++) {
</span><span>        </span><span style="color:#96b5b4;">printf</span><span>(&quot;</span><span style="color:#d08770;">%x </span><span>&quot;, (</span><span style="color:#b48ead;">int</span><span>)(p[i] &amp; </span><span style="color:#d08770;">0xff</span><span>));
</span><span>    }
</span><span>    </span><span style="color:#96b5b4;">putchar</span><span>(&#39;</span><span style="color:#96b5b4;">\n</span><span>&#39;);
</span><span>
</span><span>    </span><span style="color:#b48ead;">int</span><span> b = </span><span style="color:#bf616a;">f0</span><span>();
</span><span>
</span><span>    </span><span style="color:#96b5b4;">printf</span><span>(&quot;</span><span style="color:#a3be8c;">a = </span><span style="color:#d08770;">%d</span><span style="color:#a3be8c;">, b = </span><span style="color:#d08770;">%d</span><span style="color:#96b5b4;">\n</span><span>&quot;, a, b);
</span><span>
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">0</span><span>;
</span><span>}
</span></code></pre>
<p>And the output is:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>f3 f 1e fa 55 48 89 e5 b8 10 0 0 0 5d c3 f3
</span><span>a = 42, b = 16
</span></code></pre>
<p>Yay! Now we've used code as data completing the homoiconicity cycle.
I hope after reading this your view of the C programming language has changed,
at least a bit. </p>
<h2 id="wait-but-c-is-not-homoiconic">Wait but C is NOT homoiconic!</h2>
<p>After I discovered these two features I was almost sure that C was homoiconic,
but I had to do some research to publish this and then I realized why it is
not.</p>
<blockquote>
<p><em>data as code and code as data</em></p>
</blockquote>
<p>This definition of homoiconicity is not very accurate, here I present a better one:</p>
<blockquote>
<p><em>In a homoiconic language, the primary representation of programs is also a
data structure in a primitive type of the language itself [...]</em></p>
</blockquote>
<p>Believe it or not this is actually from Wikipedia. So, why doesn't C fit in
this definition?  This is because the arrays that we read, wrote and executed
were not C code, they were machine code.</p>
<p>Let's create a simple abstraction, imagine there's a simple homoiconic language.
Here we're declaring an expression, note that <code>expr</code> holds the expression <code>1 + 2 * 3</code> and not <code>7</code>.</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>let expr = BuildExpr (1 + 2 * 3)
</span></code></pre>
<p>And to execute it we would have to do this:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>expr.compile()
</span><span>vm.run(expr.compiled_code) // returns 7
</span></code></pre>
<p>Because this language is homoiconic we could do things like this:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>get_literals(expr.ast)  // returns [1, 2, 3]
</span><span>get_operators(expr.ast) // returns [+, *]
</span><span>BuildString (expr.ast)  // &quot;(+ 1 (* 2 3))&quot;
</span></code></pre>
<p>Note that we can manipulate the expression in a high-level representation of
the <strong>language itself</strong>. The operations that we're doing in C would look like
this:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>expr.complile()
</span><span>expr.compiled_code[9] = 0x10
</span><span>vm.run(expr.compiled_code)
</span><span>
</span><span>some_code = [0xb8, 0x99, 0x00, 0x00, 0x00, 0xc3]
</span><span>vm.run(some_code)
</span></code></pre>
<p>As you can see this is not the same kind of abstration that we have with this
hypothetical homoiconic language. In C we can manipulate the compiled code in a
&quot;high-level&quot; representation (if you consider arrays high level) but it's not
the C code that we're manipulating, it's just the machine code.</p>
<p>This is why C is not homoiconic</p>
<h2 id="appendix-two-homoiconic-languages">Appendix: Two Homoiconic languages</h2>
<p>I talked about how homoiconicity works and why C is not homoiconic so I thought
this article was missing some examples of it.</p>
<h3 id="machine-code">Machine code</h3>
<p><em>TODO</em></p>
<h3 id="lisp">Lisp</h3>
<p><em>TODO</em></p>



        </article>
      </div>
    </div>
  </div>
</div>


  
    
<footer class="footer text-muted">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 order-last order-lg-first">
				<ul class="list-inline">
					
						<li class="list-inline-item">Made in Recife ðŸ¦€</li>
					
				</ul>
			</div>
			<div class="col-lg-8 order-first order-lg-last text-lg-end">
				<ul class="list-inline">
					
				</ul>
			</div>
		</div>
	</div>
</footer>

  

  
<script type="text/javascript" src="https://gbrls.github.io/js/main.js" defer></script>

  <script type="text/javascript" src="https://gbrls.github.io/plugins/elasticlunr.min.js" defer></script>
  <script type="text/javascript" src="https://gbrls.github.io/search_index.en.js" defer></script>
  <script type="text/javascript" src="https://gbrls.github.io/js/search.js" defer></script>

  
</body>
</html>
